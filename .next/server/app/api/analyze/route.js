"use strict";(()=>{var e={};e.id=9652,e.ids=[9652],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},92048:e=>{e.exports=require("fs")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},55315:e=>{e.exports=require("path")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},6162:e=>{e.exports=require("worker_threads")},71568:e=>{e.exports=require("zlib")},87561:e=>{e.exports=require("node:fs")},84492:e=>{e.exports=require("node:stream")},72477:e=>{e.exports=require("node:stream/web")},53837:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>y,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>x,staticGenerationAsyncStorage:()=>m});var s={};t.r(s),t.d(s,{POST:()=>l,dynamic:()=>u,runtime:()=>p});var a=t(49303),n=t(88716),o=t(60670),i=t(73966);let p="nodejs",u="force-dynamic";async function l(e){let{goal:r,context:t}=await e.json().catch(()=>({}));if(!process.env.ANTHROPIC_API_KEY)return new Response(JSON.stringify({ok:!0,notes:"Demo: provide API key to enable clinical analysis."}),{headers:{"Content-Type":"application/json"}});let s=new i.ZP({apiKey:process.env.ANTHROPIC_API_KEY}),a=`You are a BCBA-aligned assistant. Provide a brief functional analysis and ethical considerations for goal: "${r||"unspecified"}". Ensure assent-first, no aversives, emphasize naturalistic teaching, measurable criteria, and caregiver collaboration. Output JSON: {"analysis":"...","risks":"...","measures":["..."],"references":["..."]}`,n=await s.messages.create({model:process.env.ANTHROPIC_MODEL_SONNET||"claude-3-5-sonnet-20241022",max_tokens:600,temperature:.3,messages:[{role:"user",content:a}]}),o=n.content[0]?.text||"{}";try{let e=JSON.parse(o);return new Response(JSON.stringify({ok:!0,...e}),{headers:{"Content-Type":"application/json"}})}catch{return new Response(JSON.stringify({ok:!0,analysis:o}),{headers:{"Content-Type":"application/json"}})}}let c=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/analyze/route",pathname:"/api/analyze",filename:"route",bundlePath:"app/api/analyze/route"},resolvedPagePath:"/Users/home/dev/ABA-tool/app/api/analyze/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:x}=c,y="/api/analyze/route";function h(){return(0,o.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:m})}},49303:(e,r,t)=>{e.exports=t(30517)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[8948,3966],()=>t(53837));module.exports=s})();