(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[122],{2131:function(e,t,s){Promise.resolve().then(s.bind(s,2648))},2648:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(7437),n=s(2265);function l(e){let{defaultTitle:t,defaultInterests:s,autoGenerate:l}=e,[r,i]=(0,n.useState)(t||"Say hello"),[c,d]=(0,n.useState)(s&&s.join(", ")||"drawing"),[o,m]=(0,n.useState)([]),[u,h]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{i(t||"Say hello"),d(s&&s.join(", ")||"drawing")},[t,s]),(0,n.useEffect)(()=>{l&&(async()=>{h(!0);try{let e=await fetch("/api/pathways",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t||"Say hello",interests:s||["drawing"]})}),a=await e.json();m(a.steps||[])}finally{h(!1)}})()},[l,t,s]),(0,a.jsxs)("div",{className:"luvler-card",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Friendship Pathway"}),(0,a.jsx)("p",{className:"text-gray-700 mt-1",children:"Pick an interest and generate small social steps."}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-3 mt-3",children:[(0,a.jsx)("input",{value:r,onChange:e=>i(e.target.value),className:"luvler-input",placeholder:"Title"}),(0,a.jsx)("input",{value:c,onChange:e=>d(e.target.value),className:"luvler-input",placeholder:"Interests (comma separated)"})]}),(0,a.jsx)("button",{onClick:async()=>{h(!0);let e=await fetch("/api/pathways",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:r,interests:c.split(",").map(e=>e.trim())})});m((await e.json()).steps||[]),h(!1)},className:"luvler-button-primary mt-3",children:u?"Generating…":"Generate plan"}),o.length>0&&(0,a.jsx)("ol",{className:"mt-4 space-y-2 list-decimal ml-5",children:o.map(e=>(0,a.jsxs)("li",{className:"text-gray-900",children:[(0,a.jsx)("span",{className:"font-medium",children:e.instruction}),e.tip&&(0,a.jsxs)("span",{className:"text-gray-600",children:[" — ",e.tip]})]},e.order))})]})}function r(){let[e,t]=(0,n.useState)(3);return(0,a.jsxs)("div",{className:"luvler-card",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Energy & Sensory"}),(0,a.jsx)("p",{className:"text-gray-700 mt-1",children:"Quick check-in. Adjust your plan gently."}),(0,a.jsx)("div",{className:"flex items-center gap-2 mt-3",children:[1,2,3,4].map(s=>(0,a.jsx)("button",{onClick:()=>t(s),className:"w-10 h-6 rounded ".concat(s<=e?"bg-success-500":"bg-gray-300"),"aria-label":"Energy ".concat(s)},s))}),(0,a.jsxs)("p",{className:"text-gray-700 mt-2",children:["Current: ",["Low","Okay","Good","Full"][e-1]]})]})}function i(){let[e,t]=(0,n.useState)([{name:"Food",target:150,spent:92},{name:"Transit",target:60,spent:20},{name:"Fun",target:40,spent:10}]),[s,l]=(0,n.useState)([]);return(0,a.jsxs)("div",{className:"luvler-card",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Budget Jars"}),(0,a.jsx)("p",{className:"text-gray-700 mt-1",children:"Analog-friendly jars. Move small amounts weekly."}),(0,a.jsx)("div",{className:"grid md:grid-cols-3 gap-3 mt-3",children:e.map(e=>{let s=Math.min(100,Math.round(e.spent/Math.max(1,e.target)*100));return(0,a.jsxs)("div",{className:"border rounded-xl p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["$",e.spent,"/$",e.target]})]}),(0,a.jsx)("div",{className:"luvler-progress mt-2",children:(0,a.jsx)("div",{className:"luvler-progress-bar",style:{width:"".concat(s,"%")}})}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,a.jsx)("button",{onClick:()=>t(t=>t.map(t=>t.name===e.name?{...t,spent:Math.max(0,t.spent-5)}:t)),className:"luvler-button-secondary",children:"-5"}),(0,a.jsx)("button",{onClick:()=>t(t=>t.map(t=>t.name===e.name?{...t,spent:t.spent+5}:t)),className:"luvler-button-secondary",children:"+5"})]})]},e.name)})}),(0,a.jsx)("button",{onClick:async()=>{let t=await fetch("/api/budget",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jars:e})});l((await t.json()).tips||[])},className:"luvler-button-primary mt-3",children:"Get tips"}),s.length>0&&(0,a.jsx)("ul",{className:"mt-3 list-disc ml-5 text-gray-700",children:s.map((e,t)=>(0,a.jsx)("li",{children:e},t))})]})}function c(){let[e,t]=(0,n.useState)([]),[s,l]=(0,n.useState)(!1);return(0,a.jsxs)("div",{className:"luvler-card",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Track Map"}),(0,a.jsx)("p",{className:"text-gray-700 mt-1",children:"Aleph → Bet principle: one step unlocks the next."}),(0,a.jsx)("button",{onClick:async()=>{l(!0);let e=await fetch("/api/tracks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:"illustration"})});t(((await e.json()).outline||[]).map(e=>({id:e.id,title:e.title}))),l(!1)},className:"luvler-button-primary mt-3",children:s?"Loading…":"Load outline"}),e.length>0&&(0,a.jsx)("ul",{className:"mt-3 list-disc ml-5 text-gray-700",children:e.map(e=>(0,a.jsx)("li",{children:e.title},e.id))})]})}function d(){let[e,t]=(0,n.useState)(null),[s,d]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{try{let e=localStorage.getItem("luvler_onboarding_v1");e&&(t(JSON.parse(e)),d(!0))}catch(e){}},[]),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Companion"}),(0,a.jsx)("p",{className:"text-gray-700 mt-2",children:"Dashboard for goals, friends, and creations (demo)."}),s&&(0,a.jsxs)("div",{className:"mt-4 p-4 border border-success-200 bg-success-50 rounded-xl flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-success-900 text-sm",children:"Quick‑start generated from your onboarding. You can change it anytime."}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>d(!1),className:"luvler-button-secondary",children:"Dismiss"}),(0,a.jsx)("a",{href:"/onboarding",className:"luvler-button-primary",children:"Edit onboarding"})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mt-6",children:[(0,a.jsx)(r,{}),(0,a.jsx)(l,{defaultTitle:(null==e?void 0:e.goal)||"Say hello",defaultInterests:(null==e?void 0:e.interests)||["drawing"],autoGenerate:!0}),(0,a.jsx)(i,{}),(0,a.jsx)(c,{})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=2131)}),_N_E=e.O()}]);